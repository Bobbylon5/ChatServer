<html>
<head>
  <title>Hello Handlebars</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <script src="/Assets/js/SockJS.js" ></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>

</head>
<body>
	<script >
		<!--
		var answer = prompt ("What is your name ?","")
		alert ("Hello there, " + answer)
			sock = new SockJS('/myapp') 
			sock.onopen = function() {
	 			sock.send(answer);
			};
		// -->
	</script>
	
	<h1>This is my Forum!</h1>
	
	
	<h1>Hello
	<script type="text/javascript">
		
		document.write("" + answer )
		$(function() {
			$('#messageID').submit(function(event) {
				event.preventDefault();
	 			sock.send(this.MessageX.value);
			});
			
			var $messagesDIV = $( "#messagesDIV" ),
			str = "Room Messages:",
			html = $.parseHTML (str ),
			userMessages = [];
			
			// Append the html
			$log.append (html);
			
			//gather the parsed html
			$.each (html, function(i, el ) {
				userMessages[i] = "<li>" + el.userMessages + "</li>";
			});
			
			// recieves the messages
			sock.onmessage = function(d) {
				$("#name").html(d.data);
			};
			
			// Insert the messages
			$messages.append("<h3>User Messages</h3>");
			$("<ol></ol>")
			.append( userMessages.join(""))
			.appendTo( $messagesDIV );
		});
		
	</script> 
	
	!</h1>
  <br/>
  <h1>People online now include: <div id="name">    name   </div></h1>
  <br/>
  
  <!--This shows where the messages start -->
	<div id="messagesDIV" >
	<form id="messageID">
		Message:<br/>
		<input type="text" name="MessageX"/><br/>
		<input type="submit" value="Submit"/>
	</form> 
	</div>
	<ul id="messageList">
	</ul>
  <br/>
  <br/>

  
</body>
</html>
